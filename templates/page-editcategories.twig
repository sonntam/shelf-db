{% extends 'ext-element-page.twig' %}

{% set pageId = (pageId ?? 'editcategories') %}

{% set langLabels = { mainHeader: 'editCategories' } %}
{% set title = category.name %}

{% block pagePre %}

<script>
  ShelfDB.Core.pageContainerAfterLoadTasks.push( function(event,ui) {

    console.log("DEBUG: pageTask");

    // Setup the user controls
    ShelfDB.GUI.EditCategory.CategoryTree.setup({
      ctrlBoxSelector: '.editcontrols',
      treeSelector: '#editcategorytree',
      btnAddRootSelector: '#editcontrols-addroot',
      btnEditSelector: '#editcontrols-edit',
      btnDeleteSelector: '#editcontrols-delete',
      btnAddSelector: '#editcontrols-add'
    });
  });

</script>

{% endblock pagePre %}

{% block pageContent %}
  {# Title #}
  {% if langLabels.mainHeader %}
    <h2 class="text-center text-md-left" uilang="{{ langLabels.mainHeader }}">
  {% else %}
    <h2 class="text-center text-md-left">
  {% endif %}
  {{ title ?? '' }}</h2>

  <ul>
  <li uilang="editCategoriesDragDropHint"></li>
  <li uilang="editCategoriesClickNodeHint"></li>
  <li uilang="editCategoriesDeleteHint"></li>
  <li uilang="editCategoriesDeleteMigrateHint"></li>
  <li uilang="editCategoriesRootDeleteHint"></li>
  </ul>

  <button id="editcontrols-addroot" class="btn btn-primary my-2"><i class="fa fa-plus"></i>&nbsp;<span uilang="add"></span></button>
  <div id="editcategorytree" data-url="{{ relRoot }}lib/json.categorytree.php"></div>
  <div class="editcontrols d-none">
    <span><i id="editcontrols-edit" class="fa fa-pencil"></i>&nbsp;</span>
    <span><i id="editcontrols-delete" class="fa fa-times" style="color: darkred"></i>&nbsp;</span>
    <span><i id="editcontrols-add" class="fa fa-plus"  style="color: green"></i>&nbsp;</span>&nbsp;
  </div>
  <div id="dialog"></div>


{% endblock pageContent %}
